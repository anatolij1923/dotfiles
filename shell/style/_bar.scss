@use "sass:color";
@use "../colors" as *;
@use "mixins/material" as *;
@use "mixins/button.scss" as *;
@use "mixins/elevation.scss" as *;
@use "sass:string";

@function gtkalpha($c, $a) {
  @return string.unquote("alpha(#{$c},#{$a})");
}

.bar {
  background: $color-surface;

  .left-side {
    margin: 0 0 0 1rem;
  }

  .center {
    margin: 0 1rem;
  }

  .right-side {
    margin: 0 1rem 0 0;
  }

  .workspaces {
    margin: 1rem 0.3rem;

    button {
      @include button;
      background-color: $color-secondary;
      min-height: 1rem;
      min-width: 1rem;
      transition: min-width 0.3s;

      border-radius: 1rem;

      &:hover {
        background-color: $color-primary;
      }

      &.empty {
        background-color: $color-surface_variant;
      }

      &.focused {
        min-width: 2rem;
        background-color: $color-primary
      }

    }
  }

  .focused-client {
    font-weight: 500;
    color: $color-on_surface;
  }

  .clock {
    button {
      @include button;
      border-radius: 32px;
      // background-color: $color-surface_container;
      padding: 0 1rem;

      label {
        color: $color-on_surface;
        font-weight: 400;
      }

      &:checked {
        background-color: $color-on_secondary_fixed_variant;

        // label {
        // color: $color-surface;
        // }
      }

      &:hover {
        background-color: color.adjust($color-surface,
            $lightness: 10%,
          );
      }
    }

    popover.background {
      arrow {
        all: unset;
      }

      contents {
        all: unset;
        // background-color: transparent;

        calendar {
          background-color: $color-surface_container;
          padding: 0.5rem;
          border-radius: 1.5rem;

          header {
            button {
              color: $color-on_surface;
            }

            stack.month {
              color: $color-on_surface;
              font-weight: 500;
            }

            label.year {
              color: $color-on_surface;
              font-weight: 500;
            }
          }

          grid {
            label {
              color: $color-on_surface;
              border-radius: 0.5rem;
              // padding: 8px;

              &.day-name {
                font-weight: 600;
              }

              &.today {
                background-color: $color-primary;
                color: $color-surface;
              }

              &.other-month {
                color: $color-secondary_container;
              }
            }
          }
        }
      }
    }
  }

  .tray {
    button {
      @include button;
      border-radius: 0.5rem;
      margin: 0.5rem 0;
      padding: 0 0.5rem;

      background-color: transparent;

      &:hover {
        background-color: $color-secondary_container
      }

      &:checked {
        background-color: color.adjust($color-secondary_container, $lightness: 15%);
      }
    }
  }

  .kb-layout {
    color: $color-on_surface;

    button {
      @include button;
      // border: 1px solid wheat;
      background-color: transparent;
      font-weight: 500;
      outline: none;
      border-radius: 1rem;

      .material-icon {
        @include material-icon;
      }
    }
  }

  .sys-button {
    button {
      @include button;
      // @include elevation(3);
      // background-color: $color-surface_container;
      border-radius: 32px;
      padding: 0.5rem;

      &:hover {
        background-color: color.adjust($color-surface,
            $lightness: 10%,
            $space: hsl);
      }
    }

    &.active {
      button {
        @include button;
        @include elevation(3);
        border-radius: 32px;
        padding: 8px;
        background-color: $color-on_secondary_fixed_variant;
      }
    }
  }

  .bluetooth-widget {
    color: $color-on_surface;

    levelbar {
      margin: 0.3rem 4px;
      transform: rotate(180deg);

      block {
        all: unset;
        min-width: 4px;
        border-radius: 4px;
        background-color: $color-surface_container_highest;

        &.filled {
          background-color: $color-primary;
        }

        &.filled.low {
          background-color: $color-error;
        }
      }
    }

    .material-icon {
      @include material-icon;
    }
  }

  .network {
    color: $color-on_surface;

    label {
      @include material-icon;
    }
  }

  .notification-widget {
    font-weight: 500;
    color: $color-on_surface;

    .material-icon {
      @include material-icon;
    }
  }

  .battery {
    color: color.adjust($color-surface, $lightness: 10%, $space: hsl);
    // color: $color-surface;
    font-weight: 700;

    progressbar {
      trough {
        all: unset;
        background-color: gtkalpha($color-on_surface, 0.6);
        min-height: 1.5rem;
        min-width: 3.5rem;
        border-radius: 16px;

        progress {
          all: unset;
          min-height: 1.5rem;
          background-color: $color-primary;
          border-radius: 6px;
        }
      }
    }

    .percentage-label {
      .bolt-icon {
        @include material-icon(20px, "Material Icons Outlined");
        font-weight: 900;
      }
    }
  }
}
